(self.webpackChunk_use_midi_docs=self.webpackChunk_use_midi_docs||[]).push([[545],{4730:function(t,n,e){"use strict";function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t}e.d(n,{Z:function(){return i}})},43758:function(t,n,e){"use strict";function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function i(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.d(n,{Z:function(){return i}})},96350:function(t,n,e){"use strict";e.r(n),e.d(n,{frontMatter:function(){return s},contentTitle:function(){return f},metadata:function(){return l},toc:function(){return p},default:function(){return m}});var r=e(7560),i=e(98283),o=e(2784),u=e(30876),a=e(25412),c=["components"],s={sidebar_label:"Rma Example"},f="Rma Example",l={unversionedId:"rma",id:"rma",isDocsHomePage:!1,title:"Rma Example",description:"export default function () {",source:"@site/examples/rma.mdx",sourceDirName:".",slug:"/rma",permalink:"/use-midi/examples/rma",version:"current",frontMatter:{sidebar_label:"Rma Example"},sidebar:"defaultSidebar",previous:{title:"Piano Example",permalink:"/use-midi/examples/piano"}},p=[],h={toc:p},d=function(){var t=o.useState("not-selected"),n=t[0],e=t[1],r=o.useState("not-selected"),i=r[0],c=r[1],s=o.useState([0,0,0]),f=s[0],l=s[1],p=o.useState([]),h=p[0],d=p[1],m=o.useState([]),v=m[0],y=m[1],g=o.useState([]),k=g[0],b=g[1];o.useEffect((function(){b((function(t){return[].concat(t,["run effect"])})),(0,a.Rx)((function(){b((function(t){return[].concat(t,["run rma"])}));var t=[].concat(a.Rx.inputs.keys()),n=[].concat(a.Rx.outputs.keys());return d(t),y(n),e(t[0]),c(n[0]),!0}))}),[]);var w=function(t){return void 0===t&&(t=0),function(n){l((function(e){return e.map((function(e,r){return r===t?n.target.value:e}))}))}};return(0,u.kt)("div",null,(0,u.kt)("p",null,"input: ",n),o.useMemo((function(){var t,e=null==(t=a.Rx.inputs)?void 0:t.get(n);return e&&(0,u.kt)("ul",null,(0,u.kt)("li",null,"name: ",e.name),(0,u.kt)("li",null,"type: ",e.type),(0,u.kt)("li",null,"state: ",e.state))}),[n]),(0,u.kt)("p",null,"output: ",i),o.useMemo((function(){var t,n=null==(t=a.Rx.outputs)?void 0:t.get(i);return n&&(0,u.kt)("ul",null,(0,u.kt)("li",null,"name: ",n.name),(0,u.kt)("li",null,"type: ",n.type),(0,u.kt)("li",null,"state: ",n.state))}),[i]),(0,u.kt)("select",{value:n,onChange:function(t){return e(t.target.value)}},(0,u.kt)("option",{value:"not-selected"},"Please select a input device"),null==h?void 0:h.map((function(t){return(0,u.kt)("option",{key:t,value:t},t.slice(0,25),"...")}))),(0,u.kt)("select",{value:i,onChange:function(t){return c(t.target.value)}},(0,u.kt)("option",{value:"not-selected"},"Please select a output device"),null==v?void 0:v.map((function(t){return(0,u.kt)("option",{key:t,value:t},t.slice(0,25),"...")}))),(0,u.kt)("div",null,(0,u.kt)("input",{type:"number",min:"0",max:"255",value:f[0],onChange:w(0)}),(0,u.kt)("input",{type:"number",min:"0",max:"255",value:f[1],onChange:w(1)}),(0,u.kt)("input",{type:"number",min:"0",max:"255",value:f[2],onChange:w(2)}),(0,u.kt)("button",{onClick:function(){b((function(t){return[].concat(t,["clicked"])}));var t=a.Rx.inputs.get(n),e=a.Rx.outputs.get(i);console.log(t,e),t.onmidimessage=function(t){e.send(t.data),b((function(n){return[].concat(n,["onmidimessage "+t.data])}))}}},"send data")),(0,u.kt)("ul",null,k.map((function(t,n){return(0,u.kt)("li",{key:n},t)}))))};function m(t){var n=t.components,e=(0,i.Z)(t,c);return(0,u.kt)(d,(0,r.Z)({},h,e,{components:n,mdxType:"MDXLayout"}),(0,u.kt)("h1",{id:"rma-example"},"Rma Example"))}m.isMDXComponent=!0},25412:function(t,n,e){"use strict";e.d(n,{nH:function(){return H},Rx:function(){return d},Ur:function(){return z},iX:function(){return q}});var r=function(t,n){return t.forEach(n)};var i=function t(n,e){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(i.length>0)return t(n,e)&&t.apply(void 0,[e].concat(i));if(typeof n!=typeof e)return!1;if(t.str(n)||t.num(n))return n===e;for(var u in n)if(!(u in e))return!1;for(var a in e)if(n[a]!==e[a])return!1;return!0};i.arr=Array.isArray,i.fls=function(t){return i.und(t)||i.nul(t)||!1===t||""===t},i.nul=function(t){return null===t},i.und=function(t){return void 0===t},i.num=function(t){return"number"==typeof t},i.str=function(t){return"string"==typeof t},i.bol=function(t){return!0===t||!1===t},i.fun=function(t){return"function"==typeof t},i.obj=function(t){return!!t&&"Object"===t.constructor.name};var o,u=-1,a=!1,c=g(),s=g(),f=g(),l=g(),p=g(),h="undefined"!=typeof navigator&&"function"==typeof navigator.requestMIDIAccess?function(){return navigator.requestMIDIAccess({sysex:true,software:true})}:function(){},d=function(t){return y(t,c)};function m(t){~u&&(t.onstatechange=m,o=t.target||t,d.fun(v))}function v(){var t=u;u=d.now(),f.flush(),c.flush(t),l.flush(),s.flush(),p.flush()}function y(t,n){a?(n.delete(t),t(0)):(n.add(t),u<0&&(u=0,"demand"!==d.status&&h().then(m,d.catch)))}function g(){var t=new Set,n=t;return{add:function(n){return t.add(n)},delete:function(n){return t.delete(n)},flush:function(e){n.size&&(t=new Set,n.forEach((function(n){return n(e)&&t.add(n)})),n=t)}}}function k(t,n){Object.defineProperty(d,t,{get:function(){return n()}})}d.write=function(t){return y(t,s)},d.onStart=function(t){return y(t,f)},d.onAccess=function(t){return y(t,l)},d.onFinish=function(t){return y(t,p)},d.cancel=function(t){c.delete(t),s.delete(t)},d.sync=function(t){a=!0,d.fun(t),a=!1},d.throttle=function(t){t()},d.use=function(t){return h=t},d.now="undefined"!=typeof performance?function(){return performance.now()}:Date.now,d.fun=function(t){return t()},d.catch=console.error,d.status="always",k("access",(function(){return o})),k("inputs",(function(){var t;return null==(t=o)?void 0:t.inputs})),k("outputs",(function(){var t;return null==(t=o)?void 0:t.outputs})),d.advance=function(){"demand"!==d.status?console.warn("Cannot call the manual advancement of rmaz"):v()};"undefined"!=typeof window&&window.document&&window.document.createElement;var b=function(){function t(t){this._listeners=[],this._controller=t}var n=t.prototype;return n.add=function(t,n){d(n),this._listeners.push((function(){return d.cancel(n)}))},n.clean=function(){this._listeners.forEach((function(t){return t()})),this._listeners=[]},t}(),w=function(){function t(t){this._timeouts=new Map,this._controller=t}var n=t.prototype;return n.add=function(t,n,e){var r;void 0===e&&(e=140),this.remove(t);for(var i=arguments.length,o=new Array(i>3?i-3:0),u=3;u<i;u++)o[u-3]=arguments[u];this._timeouts.set(t,(r=window).setTimeout.apply(r,[n,e].concat(o)))},n.remove=function(t){var n=this._timeouts.get(t);n&&window.clearTimeout(n)},n.clean=function(){this._timeouts.forEach((function(t){window.clearTimeout(t)})),this._timeouts.clear()},t}(),_=e(98283),x=e(2784),S=e(43758),A=e(5491),E=e(4730),C=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(n=t.call.apply(t,[this].concat(r))||this).aliasKey="xy",n}(0,A.Z)(n,t);var e=n.prototype;return e.reset=function(){t.prototype.reset.call(this),this.state.axis=void 0},e.init=function(){this.state.offset=[0,0],this.state.lastOffset=[0,0]},e.intent=function(t){this.state;this.state.axis=this.state.axis||selectAxis(t),this.state._blocked},n}(function(){function t(t,n,e){this._ctrl=t,this._args=n,this._key=e,this.state||(this.state={values:[0,0],initial:[0,0]}),this.init&&this.init(),this.reset&&this.reset()}var n=t.prototype;return n.init=function(){this.reset()},n.reset=function(){this.state,this.shared,this.config,this._args},n.start=function(t){this.state,this.config},n.emit=function(){this.state,this.shard,this.config},n.clean=function(){this.eventStore.clean(),this.timeoutStore.clean()},n.change=function(){},n.input=function(t){},n.output=function(){},(0,E.Z)(t,[{key:"state",get:function(){return this._ctrl.state[this._key]},set:function(t){this._ctrl.state[this._key]=t}},{key:"shared",get:function(){return this._ctrl.state.shared}},{key:"eventStore",get:function(){return this._ctrl.eventStores[this._key]}},{key:"timeoutStore",get:function(){return this._ctrl.timeoutStores[this._key]}},{key:"engine",get:function(){return this._ctrl.engines[this._key]}},{key:"config",get:function(){return this._ctrl.config}}]),t}()),M=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(n=t.call.apply(t,[this].concat(r))||this).ingKey="input",n}(0,A.Z)(n,t);var e=n.prototype;return e.reset=function(){t.prototype.reset.call(this);this.state},e.setup=function(){},e.cancel=function(){},e.clean=function(){t.prototype.clean.call(this)},e.bind=function(t){this.config.device},n}(C),R=function(t){function n(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return t.call.apply(t,[this].concat(e))||this}return(0,A.Z)(n,t),n}(C),Z=new Map,P=new Map,j={button:{engine:M,config:{}},fader:{engine:R,config:{}},note:{engine:R,config:{}}};function I(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];r(n,(function(t){Z.set(t,j[t].engine),P.set(t,j[t].config)}))}var O=["enabled"],D=function(){function t(t){this.keys=new Set,this._updateStore=new b(this),this._timeoutStore=new w(this),this.eventStores={},this.timeoutStores={},this.engines={},this.nativeProps={},this.props={},this.config={},this.state={shared:{}},this.props=t}var n=t.prototype;return n.clean=function(){for(var t,n=(0,S.Z)(this.keys);!(t=n()).done;){var e=t.value;this.eventStores[e].clean(),this.timeoutStores[e].clean()}},n.effect=function(){var t=this;return this.config.shared.target&&this.bind(),function(){return t._updateStore.clean(),void t._timeoutStore.clean()}},n.bind=function(){},n.applyProps=function(t,n){this.props=t,this.nativeProps=n},n.applyConfig=function(t,n){var e=t.enabled,r=(0,_.Z)(t,O),i={shared:{enabled:e}};if(n){var o=P.get(n);i[n]=Object.assign({},o,r)}else!function(t,n,e){for(var r in t)n.call(e,t[r],r)}(r,(function(t,n){var e=P.get(n);e&&(i[n]=Object.assign({},t,e))}));this.config=i},t}(),T=["children","config"];function X(t,n,e,r){void 0===n&&(n={});var i=x.useMemo((function(){return new D(t)}),[]);if(i.applyProps(t,r),i.applyConfig(n,e),x.useEffect(i.effect.bind(i)),x.useEffect((function(){return i.clean.bind(i)}),[]),void 0===n.target)return i.bind.bind(i)}function q(t,n){return void 0===n&&(n={}),I("note"),X({onNote:t},n,"note")}function z(t,n){return void 0===n&&(n={}),I("button","fader","note"),X(t,n)}function H(t){var n=t.children,e=t.config;return n(z((0,_.Z)(t,T),e))}}}]);