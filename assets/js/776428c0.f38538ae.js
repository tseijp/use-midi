(self.webpackChunk_use_midi_docs=self.webpackChunk_use_midi_docs||[]).push([[2],{13850:function(t,n,e){"use strict";e.r(n),e.d(n,{Container:function(){return dt},Li:function(){return ut},Set:function(){return ft},Tut:function(){return ct},contentTitle:function(){return ot},default:function(){return pt},frontMatter:function(){return rt},metadata:function(){return at},toc:function(){return st}});var i=e(98283),r=e(73182),o=e(7560),a=e(2784),s=e(30876),u=e(52275);function c(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return 0===n.length?function(){}:1===n.length?n[0]:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return f(n,(function(t){return i=t.apply(void 0,e)||i})),i};var i}var f=function(t,n){return t.forEach(n)};function d(t,n,e){for(var i in t)n.call(e,t[i],i)}var l=function t(n,e){for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];if(r.length>0)return t(n,e)&&t.apply(void 0,[e].concat(r));if(typeof n!=typeof e)return!1;if(t.str(n)||t.num(n))return n===e;for(var a in n)if(!(a in e))return!1;for(var s in e)if(n[s]!==e[s])return!1;return!0};l.arr=Array.isArray,l.fls=function(t){return l.und(t)||l.nul(t)||!1===t||""===t},l.nul=function(t){return null===t},l.und=function(t){return void 0===t},l.num=function(t){return"number"==typeof t},l.str=function(t){return"string"==typeof t},l.bol=function(t){return!0===t||!1===t},l.fun=function(t){return"function"==typeof t},l.obj=function(t){return!!t&&"Object"===t.constructor.name};var p,h=-1,v=!1,m=A(),g=A(),b=A(),y=A(),x=A(),_="undefined"!=typeof navigator&&"function"==typeof navigator.requestMIDIAccess?function(){return navigator.requestMIDIAccess(w.options)}:function(){w.supported=!1},w=function(t){return N(t,m)};function k(){var t;h<0&&(h=0,w.requested=!0,w.demanded||null==(t=_())||null==t.then||t.then(S,w.catch))}function S(t){~h&&(w.allowed=!0,t.onstatechange=S,p=t.target?t:{target:t},w.fun(T))}function T(){var t=h;h=w.now(),b.flush(),m.flush(t),y.flush(),g.flush(),x.flush()}function N(t,n){v?(n.delete(t),t(0)):(n.add(t),k())}function A(){var t=new Set,n=t;return{add:function(n){return t.add(n)},delete:function(n){return t.delete(n)},flush:function(e){n.size&&(t=new Set,n.forEach((function(n){return n(e)&&t.add(n)})),n=t)}}}function E(t,n){Object.defineProperty(w,t,{get:function(){if(w.requested||k(),w.allowed)return n()}})}w.write=function(t){return N(t,g)},w.onStart=function(t){return N(t,b)},w.onAccess=function(t){return N(t,y)},w.onFinish=function(t){return N(t,x)},w.sync=function(t){return v=!0,w.fun(t),void(v=!1)},w.cancel=function(t){return m.delete(t),void g.delete(t)},w.throttle=function(t){return w.fun(t)},w.use=function(t){return _=t},w.now="undefined"!=typeof performance?function(){return performance.now()}:Date.now,w.fun=function(t){return t()},w.catch=console.error,w.allowed=!1,w.demanded=!1,w.requested=!1,w.supported=!0,w.options={sysex:!0,software:!0},E("event",(function(){return p})),E("inputs",(function(){var t;return null==(t=p)?void 0:t.target.inputs})),E("outputs",(function(){var t;return null==(t=p)?void 0:t.target.outputs})),w.advance=function(){w.demanded?T():console.warn("Cannot call the manual advancement of rmaz")};var O=function(){function t(){this._listeners=[]}var n=t.prototype;return n.add=function(t,n,e){t["on"+n]=e,this._listeners.push((function(){return t["on"+n]=void 0}))},n.clean=function(){f(this._listeners,(function(t){return t()})),this._listeners=[]},t}(),Z=function(){function t(){this._listeners=[]}var n=t.prototype;return n.add=function(t){var n=function(){return t(w.event)};this._listeners.push((function(){return w.cancel(n)})),w(n)},n.clean=function(){f(this._listeners,(function(t){return t()})),this._listeners=[]},t}();!function(){function t(){this._timeouts=new Map}var n=t.prototype;n.add=function(t,n,e){var i;void 0===e&&(e=140),this.remove(t);for(var r=arguments.length,o=new Array(r>3?r-3:0),a=3;a<r;a++)o[a-3]=arguments[a];this._timeouts.set(t,(i=window).setTimeout.apply(i,[n,e].concat(o)))},n.remove=function(t){var n=this._timeouts.get(t);n&&window.clearTimeout(n)},n.clean=function(){f(this._timeouts,(function(t){window.clearTimeout(t)})),this._timeouts.clear()}}();function C(t,n){if(null==t)return{};var e,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)e=o[i],n.indexOf(e)>=0||(r[e]=t[e]);return r}function M(t,n){return(M=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function P(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,M(t,n)}function j(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var D=function(){function t(t,n,e){var i;this._ctrl=void 0,this._args=void 0,this._key=void 0,this._ctrl=t,this._args=n,this._key=e,this.state||(this.state={data:[0,0,0],init:[0,0,0]}),null==(i=this.__init__)||i.call(this),this.reset()}var n,e,i=t.prototype;return i.reset=function(){var t=this.state,n=this._args;t.active=!1,t.blocked=!1,t.first=!0,t.axis=void 0,t.memo=void 0,t.deltaTime=0,t.timeStamp=0,t.elapsedTime=0,t.delta=[0,0,0],t.direction=[0,0,0],t.velocity=0,t.movement=0,t.command=0,t.channel=0,t.noteNum=0,t.distance=0,t.velocity=0,t.args=n},i.start=function(t){var n=this.state;n.active||(this.reset(),n.active=!0,n.first=!1,n.target=t.target,n.init=n.data=t.data),n.startTime=n.timeStamp=t.timeStamp},i.compute=function(t){var n,e,i,r=this.state,o=this._key;if(r.active&&!r.blocked&&(r.args=this._args,r.first=r.active&&!r.active,r.last=!r.active&&r.active,r.shared[o]=r.active,t&&(r.first?null==(n=this.__first__)||n.call(this):r.last?null==(e=this.__last__)||e.call(this):null==(i=this.__change__)||i.call(this),r.target=t.target,r.event=t,r.type=t.type,r.deltaTime=t.timeStamp-r.timeStamp,r.timeStamp=t.timeStamp,r.elapsedTime=r.timeStamp-r.startTime,t.data))){var a=r.movement;a[0],a[1],a[2];var s=r.data,u=s[0],c=s[1],f=s[2],d=t.data,l=d[0],p=d[1],h=d[2];r.data=[l,p,h],r.prev=[u,c,f],r.delta=[l-u,p-c,h-f],r.sign=r.delta.map(Math.sign),r.command=l>>4,r.channel=15&l,r.noteNum=p,r.distance+=r.delta[0],r.velocity=h?h/127:r.delta[0]/r.deltaTime}},n=t,(e=[{key:"state",get:function(){return this._ctrl.state[this._key]},set:function(t){this._ctrl.state[this._key]=t}},{key:"config",get:function(){return this._ctrl.config}}])&&j(n.prototype,e),t}(),z=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(n=t.call.apply(t,[this].concat(i))||this)._key="button",n}P(n,t);var e=n.prototype;return e.bind=function(t){t("midimessage",this.button.bind(this))},e.button=function(t){this.state.active||this.start(t),this.compute(t)},e.buttonEnd=function(t){this.state.active&&(this.state.active=!1,this.state.last=!0,this.compute(t))},n}(D),B=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(n=t.call.apply(t,[this].concat(i))||this)._key="fader",n}P(n,t);var e=n.prototype;return e.bind=function(t){t("midimessage",this.fader.bind(this))},e.fader=function(t){this.state.active||this.start(t),this.compute(t)},e.faderEnd=function(t){this.state.active&&(this.state.active=!1,this.state.last=!0,this.compute(t))},n}(D),q=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(n=t.call.apply(t,[this].concat(i))||this)._key="note",n}P(n,t);var e=n.prototype;return e.bind=function(t){t("midimessage",this.note.bind(this)),t("statechange",(function(t){return console.log(t)}))},e.note=function(t){this.state.active||this.start(t),this.compute(t)},e.noteEnd=function(t){this.state.active&&(this.state.active=!1,this.state.last=!0,this.compute(t))},n}(D),I=new Map,F=new Map,L={button:{engine:z,config:{}},fader:{engine:B,config:{}},note:{engine:q,config:{}}};function X(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];f(n,(function(t){I.set(t,L[t].engine),F.set(t,L[t].config)}))}function H(){return(H=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}).apply(this,arguments)}var K=["enabled","target","device"],G=function(){function t(t){this.keys=new Set,this.eventStore=new O,this.accessStore=new Z,this.engine={},this.native={},this.props={},this.state={shared:{}},this.config={shared:{}},this.props=t,t.onButton&&this.keys.add("button"),t.onFader&&this.keys.add("fader"),t.onNote&&this.keys.add("note")}var n=t.prototype;return n.setup=function(t){this.keys.add(t)},n.effect=function(){var t=this,n=this.config.shared,e=n.target,i=n.device;return(e||i)&&this.bind(),function(){return t.accessStore.clean()}},n.clean=function(){this.eventStore.clean()},n.applyProps=function(t,n){this.props=t,this.native=n},n.applyConfig=function(t,n){this.config=function(t,n){var e=t.enabled,i=void 0===e||e,r=t.target,o=t.device,a=C(t,K),s={shared:{enabled:i,target:r,device:o}};if(n){var u=F.get(n);s[n]=H({},u,a)}else d(a,(function(t,n){var e=F.get(n);e&&(s[n]=H({},e,t))}));return s}(t,n)},n.bind=function(){for(var t=this,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];var r={},o=this.keys,a=this.eventStore,s=this.accessStore,u=this.engine,p=this.native,h=this.config,v=this.state,m=h.shared,g=m.target,b=m.device,y=function(t,n,e){void 0===t&&(t=""),void 0===e&&(e=!1);var i=t;r[i]=r[i]||[],r[i].push(n)};h.shared.enabled&&f(o,(function(n){var i=I.get(n);u[n]=new i(t,e,n),u[n].bind(y)})),d(r,(function(t,n){r[n]=c.apply(void 0,t)})),d(p,(function(t,n){y(n,(function(n){return t(H({},v.shared,{event:n,args:e}))}),!0)})),s.add((function(t){var n=t.target,e=n.inputs,i=n.outputs;l.fun(b)&&(b=b(t)),g||(g=(null==e?void 0:e.get(b))||(null==i?void 0:i.get(b))),d(r,(function(t,n){a.add(g,n,t)}))}))},t}(),J=/^on(Note|Fader|Button)/;function Q(t){var n={},e={};return d(t,(function(t,i){J.test(i)?n[i]=t:e[i]=t})),[n,e]}function R(t,n,e,i){void 0===n&&(n={});var r=a.useMemo((function(){return new G(t)}),[]);return r.applyProps(t,i),r.applyConfig(n,e),a.useEffect(r.effect.bind(r)),a.useEffect((function(){return r.clean.bind(r)}),[]),l.und(n.target)?r.bind.bind(r):void 0}function U(t,n){return void 0===n&&(n={}),X("note"),R({onNote:t},n,"note")}var V,W,Y,$,tt,nt,et=function(){function t(t,n,e,i,r){void 0===n&&(n={}),void 0===e&&(e={}),this._key=void 0,this._ctrl=void 0,this._key=i,this._ctrl=new G(n),this._ctrl.applyProps(n,r),this._ctrl.applyConfig(e,i),l.str(t)||l.fun(t)?this._ctrl.config.shared.device=t:this._ctrl.config.shared.target=t,this._ctrl.effect()}return t.prototype.destroy=function(){this._ctrl.clean()},t}(),it=(function(t){function n(n,e,i){return void 0===i&&(i={}),X("button"),t.call(this,n,{onButton:e},i,"button")||this}P(n,t)}(et),function(t){function n(n,e,i){return void 0===i&&(i={}),X("fader"),t.call(this,n,{onFader:e},i,"fader")||this}P(n,t)}(et),function(t){function n(n,e,i){return void 0===i&&(i={}),X("note"),t.call(this,n,{onNote:e},i,"note")||this}P(n,t)}(et),function(t){function n(n,e,i){void 0===e&&(e={}),void 0===i&&(i={});var r=Q(e),o=r[0],a=r[1];return X("button","fader","note"),t.call(this,n,o,i,void 0,a)||this}P(n,t)}(et),["components"]),rt={sidebar_label:"Note Example"},ot="Note Example",at={unversionedId:"note",id:"note",isDocsHomePage:!1,title:"Note Example",description:"ref//codepen.io/zastrow/pen/oDBki",source:"@site/examples/note.mdx",sourceDirName:".",slug:"/note",permalink:"/use-midi/examples/note",version:"current",frontMatter:{sidebar_label:"Note Example"},sidebar:"defaultSidebar",previous:{title:"Korg Controller",permalink:"/use-midi/examples/korg"},next:{title:"Launchpad Example",permalink:"/use-midi/examples/pad"}},st=[];function ut(t){var n=U((function(t){}));return(0,s.kt)("li",(0,o.Z)({},t,n()))}var ct=(0,u.ZP)(ut)(V||(V=(0,r.Z)(["\n  margin:0;\n  padding:0;\n  list-style: none;\n  position:relative;\n  border-radius: 0.5rem;\n  float:left;\n  ","\n  ","\n  : first-child {\n    border-radius:5px 0 5px 5px;\n  };\n  : last-child {\n    border-radius:0 5px 5px 5px;\n  };\n"])),(function(t){return~t.note.indexOf("#")?(0,u.iv)(Y||(Y=(0,r.Z)(["\n    height:8em;\n    width:2em;\n    margin:0 0 0 -1em;\n    z-index:2;\n    border:1px solid #000;\n    border-radius:0 0 3px 3px;\n    box-shadow:-1px -1px 2px rgba(255,255,255,0.2) inset,0 -5px 2px 3px rgba(0,0,0,0.6) inset,0 2px 4px rgba(0,0,0,0.5);\n    background:linear-gradient(45deg,#222 0%,#555 100%);\n    : active {\n      box-shadow:-1px -1px 2px rgba(255,255,255,0.2) inset,0 -2px 2px 3px rgba(0,0,0,0.6) inset,0 1px 2px rgba(0,0,0,0.5);\n      background:linear-gradient(to right,#444 0%,#222 100%);\n    };\n  "]))):(0,u.iv)(W||(W=(0,r.Z)(["\n    height:16em;\n    width:4em;\n    z-index:1;\n    border-left:1px solid #bbb;\n    border-bottom:1px solid #bbb;\n    border-radius:0 0 5px 5px;\n    box-shadow:-1px 0 0 rgba(255,255,255,0.8) inset,0 0 5px #ccc inset,0 0 3px rgba(0,0,0,0.2);\n    background:linear-gradient(to bottom,#eee 0%,#fff 100%);\n    : active {\n      border-top:1px solid #777;\n      border-left:1px solid #999;\n      border-bottom:1px solid #999;\n      box-shadow:2px 0 3px rgba(0,0,0,0.1) inset,-5px 5px 20px rgba(0,0,0,0.2) inset,0 0 3px rgba(0,0,0,0.2);\n      background:linear-gradient(to bottom,#fff 0%,#e9e9e9 100%);\n    };\n  "])))}),(function(t){return["a","g","f","d","c"].find((function(n){return n===t.note}))&&(0,u.iv)($||($=(0,r.Z)(["\n    margin:0 0 0 -1em;\n  "])))})),ft=u.ZP.ul(tt||(tt=(0,r.Z)(["\n  height:18.875em;\n  width:34em;\n  margin:5em auto;\n  padding: 3em 0 0 3em;\n  position:relative;\n  border:1px solid #160801;\n  border-radius:1em;\n  background:linear-gradient(to bottom right,rgba(0,0,0,0.3),rgba(0,0,0,0)),url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/187/vwood.png);\n  box-shadow:0 0 50px rgba(0,0,0,0.5) inset,0 1px rgba(212,152,125,0.2) inset,0 5px 15px rgba(0,0,0,0.5);\n"]))),dt=u.ZP.div(nt||(nt=(0,r.Z)(["\n  box-sizing: border-box;\n  border-radius:1em;\n  margin: 0;\n  background: #222;\n  width: 100%;\n"]))),lt={toc:st,Li:ut,Tut:ct,Set:ft,Container:dt};function pt(t){var n=t.components,e=(0,i.Z)(t,it);return(0,s.kt)("wrapper",(0,o.Z)({},lt,e,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"note-example"},"Note Example"),(0,s.kt)("p",null,"ref: ",(0,s.kt)("a",{parentName:"p",href:"https://codepen.io/zastrow/pen/oDBki"},"https://codepen.io/zastrow/pen/oDBki")),(0,s.kt)(dt,{mdxType:"Container"},(0,s.kt)(ft,{mdxType:"Set"},["b","a#","a","g#","g","f#","f","e","d#","d","c#","c"].map((function(t){return(0,s.kt)(ct,{note:t,key:t,mdxType:"Tut"})})))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"useNote(state => {\n    if (state.inputs) {\n        ref.current.active = true\n        setTimeout(() => {\n            ref.current.active = false\n        }, 2000)\n    }\n    if (state.outputs) {\n        state.send(ref.current.props.note)\n    }\n})\n")))}pt.isMDXComponent=!0}}]);