(self.webpackChunk_use_midi_docs=self.webpackChunk_use_midi_docs||[]).push([[2],{13850:function(t,n,e){"use strict";e.r(n),e.d(n,{Container:function(){return ot},Li:function(){return et},Set:function(){return it},Tut:function(){return rt},contentTitle:function(){return $},default:function(){return st},frontMatter:function(){return Y},metadata:function(){return tt},toc:function(){return nt}});var r=e(98283),i=e(73182),o=e(7560),a=e(2784),s=e(30876),u=e(52275),c=function(t,n){return t.forEach(n)};var f=function t(n,e){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(i.length>0)return t(n,e)&&t.apply(void 0,[e].concat(i));if(typeof n!=typeof e)return!1;if(t.str(n)||t.num(n))return n===e;for(var a in n)if(!(a in e))return!1;for(var s in e)if(n[s]!==e[s])return!1;return!0};f.arr=Array.isArray,f.fls=function(t){return f.und(t)||f.nul(t)||!1===t||""===t},f.nul=function(t){return null===t},f.und=function(t){return void 0===t},f.num=function(t){return"number"==typeof t},f.str=function(t){return"string"==typeof t},f.bol=function(t){return!0===t||!1===t},f.fun=function(t){return"function"==typeof t},f.obj=function(t){return!!t&&"Object"===t.constructor.name};var d,l=-1,p=!1,h=S(),m=S(),g=S(),v=S(),b=S(),y="undefined"!=typeof navigator&&"function"==typeof navigator.requestMIDIAccess?function(){return navigator.requestMIDIAccess({sysex:!0,software:!0})}:function(){},x=function(t){return w(t,h)};function _(t){~l&&(t.onstatechange=_,d=t.target?t:{target:t},x.fun(k))}function k(){var t=l;l=x.now(),g.flush(),h.flush(t),v.flush(),m.flush(),b.flush()}function w(t,n){p?(n.delete(t),t(0)):(n.add(t),l<0&&(l=0,"demand"!==x.status&&y().then(_,x.catch)))}function S(){var t=new Set,n=t;return{add:function(n){return t.add(n)},delete:function(n){return t.delete(n)},flush:function(e){n.size&&(t=new Set,n.forEach((function(n){return n(e)&&t.add(n)})),n=t)}}}function E(t,n){Object.defineProperty(x,t,{get:function(){return n()}})}x.write=function(t){return w(t,m)},x.onStart=function(t){return w(t,g)},x.onAccess=function(t){return w(t,v)},x.onFinish=function(t){return w(t,b)},x.cancel=function(t){h.delete(t),m.delete(t)},x.sync=function(t){p=!0,x.fun(t),p=!1},x.throttle=function(t){t()},x.use=function(t){return y=t},x.now="undefined"!=typeof performance?function(){return performance.now()}:Date.now,x.fun=function(t){return t()},x.catch=console.error,x.status="always",E("event",(function(){return d})),E("inputs",(function(){var t;return null==(t=d)?void 0:t.target.inputs})),E("outputs",(function(){var t;return null==(t=d)?void 0:t.target.outputs})),x.advance=function(){"demand"!==x.status?console.warn("Cannot call the manual advancement of rmaz"):k()};"undefined"!=typeof window&&window.document&&window.document.createElement;var T=function(){function t(t){this._controller=void 0,this._listeners=[],this._controller=t}var n=t.prototype;return n.add=function(t,n){x(n),this._listeners.push((function(){return x.cancel(n)}))},n.clean=function(){this._listeners.forEach((function(t){return t()})),this._listeners=[]},t}(),C=function(){function t(t){this._controller=void 0,this._listeners=[],this._controller=t}var n=t.prototype;return n.add=function(t){this._listeners.push()},n.clean=function(){this._listeners.forEach((function(t){return t()})),this._listeners=[]},t}();function N(t,n){if(null==t)return{};var e,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e=o[r],n.indexOf(e)>=0||(i[e]=t[e]);return i}function O(){return(O=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}function Z(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var P=function(){function t(t,n,e){this._ctrl=void 0,this._args=void 0,this._key=void 0,this._ctrl=t,this._args=n,this._key=e,this.state||(this.state={data:[0,0],init:[0,0]}),this.__init__&&this.__init__(),this.reset()}var n,e,r=t.prototype;return r.reset=function(){var t=this.state,n=this.shared,e=this._key,r=this._args;n[e]=!1,t.active=!1,t.blocked=!1,t.axis=void 0,t.memo=void 0,t.deltaTime=0,t.timeStamp=0,t.elapsedTime=0,t.delta=[0,0,0],t.direction=[0,0,0],t.velocity=0,t.movement=0,t.command=0,t.channel=0,t.noteNum=0,t.distance=0,t.velocity=0,t.args=r},r.start=function(t){var n=this.state;n.active||(this.reset(),n.active=!0,n.target=t.target,n.init=n.data=t.data),n.startTime=n.timeStamp=t.timeStamp},r.compute=function(t){var n=this.state,e=this.shared,r=this._key;if(n.active&&!n.blocked&&(n.args=this._args,n.first=n.active&&!n.active,n.last=!n.active&&n.active,e[r]=n.active,t)){var i,o,a;if(n.target=t.target,n.event=t,n.type=t.type,n.first?null==(i=this.__first__)||i.call(this):n.last?null==(o=this.__last__)||o.call(this):null==(a=this.__change__)||a.call(this),n.deltaTime=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime,!t.data)return;var s=n.movement;s[0],s[1],s[2];var u=n.data,c=u[0],f=u[1],d=u[2],l=t.data,p=l[0],h=l[1],m=l[2];n.data=[p,h,m],n.prev=[c,f,d],n.delta=[p-c,h-f,m-d],n.sign=n.delta.map(Math.sign),n.command=p>>4,n.channel=15&p,n.noteNum=h,n.distance+=n.delta[0],n.velocity=m?m/127:n.delta[0]/n.deltaTime}},r.clean=function(){this.eventStore.clean(),this.accessStore.clean()},n=t,(e=[{key:"state",get:function(){return this._ctrl.state[this._key]},set:function(t){this._ctrl.state[this._key]=t}},{key:"shared",get:function(){return this._ctrl.state.shared}},{key:"eventStore",get:function(){return this._ctrl.eventStores[this._key]}},{key:"accessStore",get:function(){return this._ctrl.accessStores[this._key]}},{key:"config",get:function(){return this._ctrl.config}}])&&Z(n.prototype,e),t}();function j(t,n){return(j=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function D(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,j(t,n)}var M=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(n=t.call.apply(t,[this].concat(r))||this)._key="button",n}D(n,t);var e=n.prototype;return e.button=function(t){this.state.active?this.buttonStart(t):this.buttonChange(t),this.accessStore.add("buttonEnd",this.buttonEnd.bind(this))},e.buttonStart=function(t){this.start(t),this.compute(t)},e.buttonChange=function(t){this.compute(t)},e.buttonEnd=function(t){this.state.active&&(this.state.active=!1,this.compute(t))},e.bind=function(t){t("button","",this.button.bind(this))},n}(P),z=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(n=t.call.apply(t,[this].concat(r))||this)._key="fader",n}D(n,t);var e=n.prototype;return e.bind=function(t){t("fader","",this.fader.bind(this))},e.fader=function(t){this.state.active?this.faderStart(t):this.faderChange(t),this.accessStore.add("faderEnd",this.faderEnd.bind(this))},e.faderStart=function(t){this.start(t),this.compute(t)},e.faderChange=function(t){this.compute(t)},e.faderEnd=function(t){this.state.active&&(this.state.active=!1,this.compute(t))},n}(P),A=new Map,B=new Map,I={button:{engine:M,config:{}},fader:{engine:z,config:{}},note:{engine:z,config:{}}};function L(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];c(n,(function(t){A.set(t,I[t].engine),B.set(t,I[t].config)}))}var F=["enabled"],q=function(){function t(t){this.keys=new Set,this.eventStores={},this.accessStores={},this.config={},this.props={},this.state={shared:{}},this.props=t,t.onButton&&this.setup("button"),t.onFader&&this.setup("fader"),t.onNote&&this.setup("note")}var n=t.prototype;return n.setup=function(t){this.keys.add(t),this.eventStores[t]=new C(this),this.accessStores[t]=new T(this)},n.effect=function(){this.config.shared.target&&this.bind()},n.clean=function(){var t=this;c(this.keys,(function(n){t.eventStores[n].clean(),t.accessStores[n].clean()}))},n.applyProps=function(t){this.props=t},n.applyConfig=function(t,n){var e=t.enabled,r=N(t,F),i={shared:{enabled:e}};if(n){var o=B.get(n);i[n]=O({},o,r)}else!function(t,n,e){for(var r in t)n.call(e,t[r],r)}(r,(function(t,n){var e=B.get(n);e&&(i[n]=O({},t,e))}));this.config=i},n.bind=function(){var t=this,n=this.config.shared;n.target&&!n.target()||n.enabled&&c(this.keys,(function(n){t.config[n].enabled&&A.get(n)}))},t}();function X(t,n,e){void 0===n&&(n={});var r=a.useMemo((function(){return new q(t)}),[]);if(r.applyProps(t),r.applyConfig(n,e),a.useEffect(r.effect.bind(r)),a.useEffect((function(){return r.clean.bind(r)}),[]),void 0===n.target)return r.bind.bind(r)}function H(t,n){return void 0===n&&(n={}),L("note"),X({onNote:t},n,"note")}var K,W,G,J,Q,R,U=function(){function t(t,n,e,r){this._key=void 0,this._ctrl=void 0,this._key=r,this._ctrl=new q(n),this._ctrl.applyProps(n),this._ctrl.applyConfig(O({},e,{target:t}),r),this._ctrl.effect()}return t.prototype.destroy=function(){this._ctrl.clean()},t}(),V=(function(t){function n(n,e,r){return void 0===r&&(r={}),L("fader"),t.call(this,n,{onFader:e},r,"fader")||this}D(n,t)}(U),function(t){function n(n,e,r){return void 0===r&&(r={}),L("button"),t.call(this,n,{onButton:e},r,"button")||this}D(n,t)}(U),function(t){function n(n,e,r){return void 0===r&&(r={}),L("button","fader","note"),t.call(this,n,e,r,void 0)||this}D(n,t)}(U),["components"]),Y={sidebar_label:"Note Example"},$="Note Example",tt={unversionedId:"note",id:"note",isDocsHomePage:!1,title:"Note Example",description:"ref//codepen.io/zastrow/pen/oDBki",source:"@site/examples/note.mdx",sourceDirName:".",slug:"/note",permalink:"/use-midi/examples/note",version:"current",frontMatter:{sidebar_label:"Note Example"},sidebar:"defaultSidebar",previous:{title:"Korg Controller",permalink:"/use-midi/examples/korg"},next:{title:"Launchpad Example",permalink:"/use-midi/examples/pad"}},nt=[];function et(t){var n=H((function(t){}));return console.log(n()),(0,s.kt)("li",(0,o.Z)({},t,n()))}var rt=(0,u.ZP)(et)(K||(K=(0,i.Z)(["\n  margin:0;\n  padding:0;\n  list-style: none;\n  position:relative;\n  border-radius: 0.5rem;\n  float:left;\n  ","\n  ","\n  : first-child {\n    border-radius:5px 0 5px 5px;\n  };\n  : last-child {\n    border-radius:0 5px 5px 5px;\n  };\n"])),(function(t){return~t.note.indexOf("#")?(0,u.iv)(G||(G=(0,i.Z)(["\n    /* Black Tuts */\n    height:8em;\n    width:2em;\n    margin:0 0 0 -1em;\n    z-index:2;\n    border:1px solid #000;\n    border-radius:0 0 3px 3px;\n    box-shadow:-1px -1px 2px rgba(255,255,255,0.2) inset,0 -5px 2px 3px rgba(0,0,0,0.6) inset,0 2px 4px rgba(0,0,0,0.5);\n    background:linear-gradient(45deg,#222 0%,#555 100%);\n    : active {\n      box-shadow:-1px -1px 2px rgba(255,255,255,0.2) inset,0 -2px 2px 3px rgba(0,0,0,0.6) inset,0 1px 2px rgba(0,0,0,0.5);\n      background:linear-gradient(to right,#444 0%,#222 100%);\n    };\n  "]))):(0,u.iv)(W||(W=(0,i.Z)(["\n    /* White Tuts */\n    height:16em;\n    width:4em;\n    z-index:1;\n    border-left:1px solid #bbb;\n    border-bottom:1px solid #bbb;\n    border-radius:0 0 5px 5px;\n    box-shadow:-1px 0 0 rgba(255,255,255,0.8) inset,0 0 5px #ccc inset,0 0 3px rgba(0,0,0,0.2);\n    background:linear-gradient(to bottom,#eee 0%,#fff 100%);\n    : active {\n      border-top:1px solid #777;\n      border-left:1px solid #999;\n      border-bottom:1px solid #999;\n      box-shadow:2px 0 3px rgba(0,0,0,0.1) inset,-5px 5px 20px rgba(0,0,0,0.2) inset,0 0 3px rgba(0,0,0,0.2);\n      background:linear-gradient(to bottom,#fff 0%,#e9e9e9 100%);\n    };\n  "])))}),(function(t){return["a","g","f","d","c"].find((function(n){return n===t.note}))&&(0,u.iv)(J||(J=(0,i.Z)(["\n    margin:0 0 0 -1em;\n  "])))})),it=u.ZP.ul(Q||(Q=(0,i.Z)(["\n  height:18.875em;\n  width:34em;\n  margin:5em auto;\n  padding: 3em 0 0 3em;\n  position:relative;\n  border:1px solid #160801;\n  border-radius:1em;\n  background:linear-gradient(to bottom right,rgba(0,0,0,0.3),rgba(0,0,0,0)),url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/187/vwood.png);\n  box-shadow:0 0 50px rgba(0,0,0,0.5) inset,0 1px rgba(212,152,125,0.2) inset,0 5px 15px rgba(0,0,0,0.5);\n"]))),ot=u.ZP.div(R||(R=(0,i.Z)(["\n  box-sizing: border-box;\n  margin: 0;\n  background: #222;\n  width: 100%;\n"]))),at={toc:nt,Li:et,Tut:rt,Set:it,Container:ot};function st(t){var n=t.components,e=(0,r.Z)(t,V);return(0,s.kt)("wrapper",(0,o.Z)({},at,e,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"note-example"},"Note Example"),(0,s.kt)("p",null,"ref: ",(0,s.kt)("a",{parentName:"p",href:"https://codepen.io/zastrow/pen/oDBki"},"https://codepen.io/zastrow/pen/oDBki")),(0,s.kt)(ot,{mdxType:"Container"},(0,s.kt)(it,{mdxType:"Set"},["b","a#","a","g#","g","f#","f","e","d#","d","c#","c"].map((function(t){return(0,s.kt)(rt,{note:t,key:t,mdxType:"Tut"})})))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"useNote(state => {\n    if (state.inputs) {\n        ref.current.active = true\n        setTimeout(() => {\n            ref.current.active = false\n        }, 2000)\n    }\n    if (state.outputs) {\n        state.send(ref.current.props.note)\n    }\n})\n")))}st.isMDXComponent=!0}}]);