"use strict";(self.webpackChunk_use_midi_docs=self.webpackChunk_use_midi_docs||[]).push([[592],{29530:function(t,e,n){n.d(e,{Zo:function(){return f},kt:function(){return h}});var r=n(32735);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var c=r.createContext({}),s=function(t){var e=r.useContext(c),n=e;return t&&(n="function"==typeof t?t(e):a(a({},e),t)),n},f=function(t){var e=s(t.components);return r.createElement(c.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return r.createElement(r.Fragment,{},e)}},l=r.forwardRef((function(t,e){var n=t.components,i=t.mdxType,o=t.originalType,c=t.parentName,f=u(t,["components","mdxType","originalType","parentName"]),l=s(n),h=i,v=l["".concat(c,".").concat(h)]||l[h]||d[h]||o;return n?r.createElement(v,a(a({ref:e},f),{},{components:n})):r.createElement(v,a({ref:e},f))}));function h(t,e){var n=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var o=n.length,a=new Array(o);a[0]=l;var u={};for(var c in e)hasOwnProperty.call(e,c)&&(u[c]=e[c]);u.originalType=t,u.mdxType="string"==typeof t?t:i,a[1]=u;for(var s=2;s<o;s++)a[s]=n[s];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}l.displayName="MDXCreateElement"},11137:function(t,e,n){n.d(e,{mb:function(){return ht},Kb:function(){return ot},nH:function(){return it},w:function(){return ut},zS:function(){return at},S6:function(){return a},Rx:function(){return p},dH:function(){return et},Ur:function(){return tt},iX:function(){return nt},kp:function(){return rt}});var r=n(23974),i={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function o(t){return t?t[0].toUpperCase()+t.slice(1):""}var a=function(t,e){return t.forEach(e)};function u(t,e,n){for(var r in t)e.call(n,t[r],r)}function c(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(){}:1===e.length?e[0]:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return a(e,(function(t){return r=t.apply(void 0,n)||r})),r};var r}var s=function t(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(i.length>0)return t(e,n)&&t.apply(void 0,[n].concat(i));if(typeof e!=typeof n)return!1;if(t.str(e)||t.num(e))return e===n;for(var a in e)if(!(a in n))return!1;for(var u in n)if(e[u]!==n[u])return!1;return!0};s.arr=Array.isArray,s.fls=function(t){return s.und(t)||s.nul(t)||!1===t||""===t},s.nul=function(t){return null===t},s.und=function(t){return void 0===t},s.num=function(t){return"number"==typeof t},s.str=function(t){return"string"==typeof t},s.bol=function(t){return!0===t||!1===t},s.fun=function(t){return"function"==typeof t},s.obj=function(t){return!!t&&"Object"===t.constructor.name};var f=j(),d=j(),l=j(),h=j(),v=j(),p=function(t){return void 0===t&&(t=function(){}),O(t,v)};p.write=function(t){return O(t,f)},p.onStart=function(t){return O(t,d)},p.onAccess=function(t){return O(t,l)},p.onFinish=function(t){return O(t,h)};var g,m=-1,y=!1,_=function(){if(p.supported)return navigator.requestMIDIAccess(p.options);p.warn("Cannot supported Web MIDI API for rmaz")};function b(t){~m&&(t.onstatechange=b,g=t.target?t:{target:t},p.allowed=!0,p.fun(w))}function w(){var t=m;m=p.now(),d.flush(),v.flush(m-t),l.flush(),f.flush(),h.flush()}function O(t,e){var n;y?(e.delete(t),t(0)):(e.add(t),m<0&&(m=0,p.demanded||(p.demanded=!0,null==(n=_())||n.then(b,p.error))))}function j(){var t=new Set,e=t;return{add:function(e){return t.add(e)},delete:function(e){return t.delete(e)},flush:function(n){e.size&&(t=new Set,e.forEach((function(e){return e(n)&&t.add(e)})),e=t)}}}function k(t,e){Object.defineProperty(p,t,{get:function(){if(p.allowed)return e()}})}p.sync=function(t){return y=!0,p.fun(t),void(y=!1)},p.cancel=function(t){return v.delete(t),void f.delete(t)},p.throttle=function(t){return p.fun(t)},p.use=function(t){return _=t},p.now="undefined"!=typeof performance?function(){return performance.now()}:Date.now,p.fun=function(t){return t()},p.warn=console.warn,p.error=console.error,p.options={sysex:!0,software:!0},p.allowed=p.demanded=!1,p.supported="undefined"!=typeof navigator&&"function"==typeof navigator.requestMIDIAccess,k("event",(function(){return g})),k("inputs",(function(){var t;return null==(t=g)?void 0:t.target.inputs})),k("outputs",(function(){var t;return null==(t=g)?void 0:t.target.outputs})),p.advance=function(){p.demanded?w():p.warn("Error: Can't call the manual advancement of rmaz")};var E=function(){function t(){this._listeners=[]}return t.prototype.clean=function(){a(this._listeners,(function(t){return t()})),this._listeners=[]},t}(),A=function(t){function e(){return t.apply(this,arguments)||this}return(0,r.Z)(e,t),e.prototype.add=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!t)return console.warn("Error: Event target of undefined (reading 'addEventListener')");t.addEventListener.apply(t,n),this._listeners.push((function(){return t.removeEventListener.apply(t,n)}))},e}(E),S=function(t){function e(){return t.apply(this,arguments)||this}return(0,r.Z)(e,t),e.prototype.add=function(t){var e=function(){return t(p.event)};this._listeners.push((function(){return p.cancel(e)})),p(e)},e}(E),P=n(66017),T=n(32735);function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e,n){return e&&M(t.prototype,e),n&&M(t,n),t}var Z=Math.abs,x=Math.sign,D=function(){function t(t,e){var n;(this._ctrl=t,this._key=e,this.state)||(this.state={data:[0,0,0]},null==(n=this.__init__)||n.call(this),this.reset())}var e=t.prototype;return e.reset=function(){var t=this.state,e=this.config,n=this.$config,r=this._ctrl;!function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];a(n,(function(e){var n=t[e+"Map"],r=t.node||0;if(t["_"+e]=0,n)return n.clear();n=t[e+"Map"]=new Map,I(t,e,(function(){return n.get(r)||0}),(function(t){n.set(r,t)}))}))}(t,"value","delta","offset","distance","movement"),t.deltaTime=t.timeStamp=t.elapsedTime=0,t._active=t.active=t.blocked=t.force=!1,t.command=t.memo=void 0,t.channel=t.note,t.threshold=Z(n.transform(n.threshold)),t.offset=t._offset=e.from?function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return s.fun(t)?t.apply(void 0,n):t}(e.from):t._offset,t.send=function(){var e,n,i;return null==(e=(null==(n=t.target)?void 0:n.send)||(null==(i=r.output)?void 0:i.send))?void 0:e(t.data)},t.first=!0,t.channel=n.channel,t.args=n.args,t.note=n.note,t.step=-1},e.start=function(t){var e=this.state;e._active||(this.reset(),e._active=!0,e.target=t.target,e.currentTarget=t.currentTarget),e.startTime=e.timeStamp=(null==t?void 0:t.timeStamp)||0},e.compute=function(t){var e,n,r,i=this.state,o=this.$state,a=this.$config,u=this._ingKey;i.args=a.args,t&&(i.event=t,i.type=t.type,i.deltaTime=t.timeStamp-i.timeStamp,i.timeStamp=t.timeStamp,i.elapsedTime=i.timeStamp-i.startTime,s.und(t.data)||function(t,e){var n=t.state,r=n.data||[],i=r[0],o=void 0===i?0:i,a=r[1],u=void 0===a?0:a,c=r[2],s=void 0===c?0:c,f=e.data||[],d=f[0],l=void 0===d?o:d,h=f[1],v=void 0===h?u:h,p=f[2],g=void 0===p?s:p;n.data||(n.init=[l,v,g]);n.data=[l,v,g],n.command=l>>4,n._value=g,n.note=v,n.prev=[o,u,s],n.channel=15&l,n._delta=g-n.value,n._movement=n.movement+n._delta}(this,t));var c=a.transform(i._movement);if(~i.step||(i.step=Z(c)>i.threshold?0:i.threshold),~i.step&&i._active&&!i.blocked||i.active){if(i.last=i.active&&!i._active,i.first=!i.active&&i._active,i.active=o[u]=i._active,i.abs=Z(i._delta),i.sign=x(c),i.direction=x(i._delta),o.movement=i.movement=i._movement=c-i.sign*i.step,o.distance=i.distance=i._distance=i.distance+i.abs,o.offset=i.offset=i._offset+i._movement,o.value=i.value=i._value,o.delta=i.delta=i._delta,i.last)return null==(e=this.__end__)?void 0:e.call(this);i.first?null==(n=this.__start__)||n.call(this):(i.velocity=i._delta/i.deltaTime,null==(r=this.__change__)||r.call(this))}},e.emit=function(){var t,e=this.state,n=this.$state;if(!e.blocked||e.force){var r=this.prop(Object.assign({},n,e,((t={})[this._key]=e._value,t)));s.und(r)||(e.memo=r)}},C(t,[{key:"state",get:function(){return this._ctrl.state[this._key]},set:function(t){this._ctrl.state[this._key]=t}},{key:"$state",get:function(){return this._ctrl.state.shared}},{key:"config",get:function(){return this._ctrl.config}},{key:"$config",get:function(){return this._ctrl.config.shared}},{key:"prop",get:function(){return this._ctrl.props[this._key]}}]),t}();function I(t,e,n,r){void 0===t&&(t={}),void 0===e&&(e="_"),Object.defineProperty(t,e,{get:n,set:r})}var R=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this)._ingKey="turning",e}(0,r.Z)(e,t);var n=e.prototype;return n.bind=function(t){t(this.midimessage.bind(this),"midimessage")},n.midimessage=function(t){this.state._active||this.start(t),this.compute(t)},e}(D),$=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this)._ingKey="noting",e}(0,r.Z)(e,t);var n=e.prototype;return n.bind=function(t){var e=this.config.shared.device;t(this.midimessage.bind(this),"midimessage"),t(this.devicestart.bind(this),e,"start"),t(this.deviceend.bind(this),e,"out"),t(this.deviceend.bind(this),e,"up")},n.midimessage=function(t){this.state.active||this.start(t),this.compute(t)},n.devicestart=function(t){var e=this.state;this.start(t),e._value=255,e._movement=e._delta=e.value-e._value,this.compute(t),this.emit()},n.deviceend=function(t){var e=this.state;e._active&&(e._value=0,e._movement=e._delta=e.value-e._value,e._active=!1,this.compute(t),this.emit())},e}(D),K=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this)._ingKey="fading",e}(0,r.Z)(e,t);var n=e.prototype;return n.bind=function(t){var e=this.config.shared.device;t(this.compute.bind(this),"midimessage"),t(this.devicestart.bind(this),e,"start"),t(this.devicechange.bind(this),e,"change"),t(this.deviceend.bind(this),e,"cancel"),t(this.deviceend.bind(this),e,"end")},n.reset=function(){t.prototype.reset.call(this)},n.devicestart=function(t){var e=this.state;this.start(t),e._value=t.clientX+t.clientY,this.compute(t)},n.devicechange=function(t){var e=this.state,n=t.clientX,r=t.clientY;e._value=n+r,e._delta=e.value-e.value,e._movement=e.movement+e._delta,this.compute(t)},n.deviceend=function(t){this.compute(t)},n.midimessage=function(t){this.state._active||this.start(t),this.compute(t)},e}(D),z=new Map,L=new Map,X={fade:{engine:K,config:{}},turn:{engine:R,config:{}},note:{engine:$,config:{}}},N=function(){function t(t){void 0===t&&(t={}),this.keys=new Set,this.native={},this.props={},this.state={shared:{}},this.config={shared:{}},this._event=new A,this._access=new S,this.props=t,t.fade&&this.keys.add("fade"),t.note&&this.keys.add("note"),t.turn&&this.keys.add("turn")}var e=t.prototype;return e.effect=function(){var t=this.config.shared,e=t.target,n=t.device;(e||n)&&this.bind()},e.clean=function(){this._event.clean(),this._access.clean()},e.apply=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(r.length>1){var o=U(t);this.props=o[0],this.native=o[1]}else this.props=t||this.props;if(this.config=W.apply(void 0,[e].concat(r)),a(r,(function(t){z.set(t,X[t].engine),L.set(t,X[t].config)})),null==e||!e.target)return this.bind.bind(this)},e.bind=function(t){var e=this;s.und(t)||(this.config=W(t),this.state.shared=Object.assign({},this.state.shared,t));var n={},r=[],f=this.keys,d=this.native,l=this.state,h=this._access,v=this._event,p=this.config.shared,g=p.target,m=p.enabled,y=function(t,e,a){if(void 0===e&&(e=""),void 0===a&&(a=""),!a)return r.push(t);var u=e?function(t,e,n){void 0===e&&(e=""),void 0===n&&(n=!1);var r=i[t],a=r&&r[e]||e;return"on"+o(t)+o(a)+(n?"Capture":"")}(e,a):a;n[u]=n[u]||[],n[u].push(t)};if(m&&a(f,(function(t){return new(z.get(t))(e,t).bind(y)})),u(d,(function(e,n){return y((function(n){return e(Object.assign({},l.shared,{event:n},t))}),"",n)})),u(n,(function(t,e){n[e]=c.apply(void 0,t)})),h.add((function(){return v.add(e.input,"midimessage",c.apply(void 0,r))})),!g)return n;u(n,(function(t,e){var n=e.substr(2).toLowerCase();v.add(g,n,t)}))},C(t,[{key:"input",get:function(){var t=this.config.shared;return H(t.input||t.port,p.inputs)}},{key:"output",get:function(){var t=this.config.shared;return H(t.output||t.port,p.outputs)}}]),t}(),q=/^(fade|turn|note|midimessage|statechange)/,F=function(){return arguments.length<=0?void 0:arguments[0]};function H(t,e){return void 0===t&&(t=F),s.fun(t)&&(t=t.apply(void 0,null==e?void 0:e.keys())),s.str(t)&&(t=null==e?void 0:e.get(t)),t}function U(t){var e={},n={};return u(t,(function(t,r){q.test(r)?e[r]=t:n[r]=t})),[e,n]}var Y={enabled:!0,device:"pointer",threshold:0,transform:function(t){return void 0===t&&(t=0),t||0},output:F,input:F,port:F};function W(t){var e={},n={shared:Y};u(t,(function(t,r){(r in Y?n.shared:e)[r]=t}));for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(1===i.length){var a=L.get(i[0]);n[i[0]]=Object.assign({},a,e)}else u(e,(function(t,e){var r=L.get(e);r&&(n[e]=Object.assign({},r,t))}));return n}var B=["as","children","fade","turn","note","config"],G=["as","children","fade","config"],J=["as","children","turn","config"],Q=["as","children","note","config"];function V(t,e){var n=T.useMemo((function(){return new N(t)}),[]);T.useEffect(n.effect.bind(n)),T.useEffect((function(){return n.clean.bind(n)}),[]);for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return n.apply.apply(n,[t,e].concat(i))}function tt(t,e){return void 0===e&&(e={}),V(t,e,"fade","turn","note")}function et(t,e){return void 0===e&&(e={}),V({fade:t},e,"fade")}function nt(t,e){return void 0===e&&(e={}),V({note:t},e,"note")}function rt(t,e){return void 0===e&&(e={}),V({turn:t},e,"turn")}var it=T.forwardRef(ct),ot=T.forwardRef(st),at=T.forwardRef(ft),ut=T.forwardRef(dt);function ct(t,e){var n=t.as,r=t.children,i=t.fade,o=t.turn,a=t.note,u=t.config,c=(0,P.Z)(t,B),s=tt({fade:i,turn:o,note:a},u);return n?(0,T.createElement)(n,Object.assign({},s(),{ref:e},c),r):null==r?void 0:r(s,e)}function st(t,e){var n=t.as,r=t.children,i=t.fade,o=t.config,a=(0,P.Z)(t,G),u=et(i,o);return n?(0,T.createElement)(n,Object.assign({},u(),a,{ref:e}),r):null==r?void 0:r(u,e)}function ft(t,e){var n=t.as,r=t.children,i=t.turn,o=t.config,a=(0,P.Z)(t,J),u=rt(i,o);return n?(0,T.createElement)(n,Object.assign({},u(),a,{ref:e}),r):null==r?void 0:r(u,e)}function dt(t,e){var n=t.as,r=t.children,i=t.note,o=t.config,a=(0,P.Z)(t,Q),u=nt(i,o);return n?(0,T.createElement)(n,Object.assign({},u(),a,{ref:e}),r):null==r?void 0:r(u,e)}var lt=function(){function t(t,e,n){var r;this._ctrl=new N(e);for(var i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];(r=this._ctrl).apply.apply(r,[e,n].concat(o)),s.str(t)||s.fun(t)?this._ctrl.config.shared.device=t:this._ctrl.config.shared.target=t,this._ctrl.effect()}return t.prototype.destroy=function(){this._ctrl.clean()},t}(),ht=function(t){function e(e,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),t.call(this,e,n,r,"fade","turn","note")||this}return(0,r.Z)(e,t),e}(lt)}}]);