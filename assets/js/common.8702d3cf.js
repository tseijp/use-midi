"use strict";(self.webpackChunk_use_midi_docs=self.webpackChunk_use_midi_docs||[]).push([[592],{29530:function(t,e,n){n.d(e,{Zo:function(){return f},kt:function(){return h}});var r=n(32735);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var c=r.createContext({}),s=function(t){var e=r.useContext(c),n=e;return t&&(n="function"==typeof t?t(e):a(a({},e),t)),n},f=function(t){var e=s(t.components);return r.createElement(c.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return r.createElement(r.Fragment,{},e)}},l=r.forwardRef((function(t,e){var n=t.components,i=t.mdxType,o=t.originalType,c=t.parentName,f=u(t,["components","mdxType","originalType","parentName"]),l=s(n),h=i,v=l["".concat(c,".").concat(h)]||l[h]||d[h]||o;return n?r.createElement(v,a(a({ref:e},f),{},{components:n})):r.createElement(v,a({ref:e},f))}));function h(t,e){var n=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var o=n.length,a=new Array(o);a[0]=l;var u={};for(var c in e)hasOwnProperty.call(e,c)&&(u[c]=e[c]);u.originalType=t,u.mdxType="string"==typeof t?t:i,a[1]=u;for(var s=2;s<o;s++)a[s]=n[s];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}l.displayName="MDXCreateElement"},11137:function(t,e,n){n.d(e,{mb:function(){return vt},Kb:function(){return at},nH:function(){return ot},w:function(){return ct},zS:function(){return ut},S6:function(){return u},Rx:function(){return g},dH:function(){return nt},Ur:function(){return et},iX:function(){return rt},kp:function(){return it}});var r=n(23974),i={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function o(t,e,n){void 0===e&&(e=""),void 0===n&&(n=!1);var r=i[t],o=r&&r[e]||e;return"on"+a(t)+a(o)+(n?"Capture":"")}function a(t){return t?t[0].toUpperCase()+t.slice(1):""}var u=function(t,e){return t.forEach(e)};function c(t,e,n){for(var r in t)e.call(n,t[r],r)}function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(){}:1===e.length?e[0]:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return u(e,(function(t){return r=t.apply(void 0,n)||r})),r};var r}var f=function t(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(i.length>0)return t(e,n)&&t.apply(void 0,[n].concat(i));if(typeof e!=typeof n)return!1;if(t.str(e)||t.num(e))return e===n;for(var a in e)if(!(a in n))return!1;for(var u in n)if(e[u]!==n[u])return!1;return!0};f.arr=Array.isArray,f.fls=function(t){return f.und(t)||f.nul(t)||!1===t||""===t},f.nul=function(t){return null===t},f.und=function(t){return void 0===t},f.num=function(t){return"number"==typeof t},f.str=function(t){return"string"==typeof t},f.bol=function(t){return!0===t||!1===t},f.fun=function(t){return"function"==typeof t},f.obj=function(t){return!!t&&"Object"===t.constructor.name};var d=k(),l=k(),h=k(),v=k(),p=k(),g=function(t){return void 0===t&&(t=function(){}),j(t,p)};g.write=function(t){return j(t,d)},g.onStart=function(t){return j(t,l)},g.onAccess=function(t){return j(t,h)},g.onFinish=function(t){return j(t,v)};var m,y=-1,_=!1,b=function(){if(g.supported)return navigator.requestMIDIAccess(g.options);g.warn("Cannot supported Web MIDI API for rmaz")};function w(t){~y&&(t.onstatechange=w,m=t.target?t:{target:t},g.allowed=!0,g.fun(O))}function O(){var t=y;y=g.now(),l.flush(),p.flush(y-t),h.flush(),d.flush(),v.flush()}function j(t,e){var n;_?(e.delete(t),t(0)):(e.add(t),y<0&&(y=0,g.demanded||(g.demanded=!0,null==(n=b())||n.then(w,g.error))))}function k(){var t=new Set,e=t;return{add:function(e){return t.add(e)},delete:function(e){return t.delete(e)},flush:function(n){e.size&&(t=new Set,e.forEach((function(e){return e(n)&&t.add(e)})),e=t)}}}function S(t,e){Object.defineProperty(g,t,{get:function(){if(g.allowed)return e()}})}g.sync=function(t){return _=!0,g.fun(t),void(_=!1)},g.cancel=function(t){return p.delete(t),void d.delete(t)},g.throttle=function(t){return g.fun(t)},g.use=function(t){return b=t},g.now="undefined"!=typeof performance?function(){return performance.now()}:Date.now,g.fun=function(t){return t()},g.warn=console.warn,g.error=console.error,g.options={sysex:!0,software:!0},g.allowed=g.demanded=!1,g.supported="undefined"!=typeof navigator&&"function"==typeof navigator.requestMIDIAccess,S("event",(function(){return m})),S("inputs",(function(){var t;return null==(t=m)?void 0:t.target.inputs})),S("outputs",(function(){var t;return null==(t=m)?void 0:t.target.outputs})),g.advance=function(){g.demanded?O():g.warn("Error: Can't call the manual advancement of rmaz")};var E=function(){function t(){this._listeners=[]}return t.prototype.clean=function(){u(this._listeners,(function(t){return t()})),this._listeners=[]},t}(),A=function(t){function e(){return t.apply(this,arguments)||this}return(0,r.Z)(e,t),e.prototype.add=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!t)return console.warn("Error: Event target of undefined (reading 'addEventListener')");t.addEventListener.apply(t,n),this._listeners.push((function(){return t.removeEventListener.apply(t,n)}))},e}(E),P=function(t){function e(){return t.apply(this,arguments)||this}return(0,r.Z)(e,t),e.prototype.add=function(t){var e=function(){return t(g.event)};this._listeners.push((function(){return g.cancel(e)})),g(e)},e}(E),T=n(66017),M=n(32735);function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Z(t,e,n){return e&&C(t.prototype,e),n&&C(t,n),t}var x=Math.abs,D=Math.sign,I=function(){function t(t,e,n){var r;(this._ctrl=t,this._args=e,this._key=n,this.state)||(this.state={data:[0,0,0]},null==(r=this.__init__)||r.call(this),this.reset())}var e=t.prototype;return e.reset=function(){var t=this.state,e=this.config,n=e.shared,r=e.from,i=this._args,o=this._ctrl;!function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];u(n,(function(e){var n=t[e+"Map"],r=t.node||0;if(t["_"+e]=0,n)return n.clear();n=t[e+"Map"]=new Map,R(t,e,(function(){return n.get(r)||0}),(function(t){n.set(r,t)}))}))}(t,"value","delta","offset","distance","movement"),t.deltaTime=t.timeStamp=t.elapsedTime=0,t._active=t.active=t.blocked=t.force=!1,t.command=t.channel=t.note=t.memo=void 0,t.threshold=x(n.transform(n.threshold)),t.offset=t._offset=r?function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return f.fun(t)?t.apply(void 0,n):t}(r):t._offset,t.send=function(){var e,n,r;return null==(e=(null==(n=t.target)?void 0:n.send)||(null==(r=o.output)?void 0:r.send))?void 0:e(t.data)},t.first=!0,t.args=i,t.step=-1},e.start=function(t){var e=this.state;e._active||(this.reset(),e._active=!0,e.target=t.target,e.currentTarget=t.currentTarget),e.startTime=e.timeStamp=(null==t?void 0:t.timeStamp)||0},e.compute=function(t){var e,n,r,i=this.state,o=this.shared,a=this.config,u=this._ingKey;i.args=this._args,t&&(i.event=t,i.type=t.type,i.deltaTime=t.timeStamp-i.timeStamp,i.timeStamp=t.timeStamp,i.elapsedTime=i.timeStamp-i.startTime,t.data&&function(t,e){var n=t.state,r=n.data||[],i=r[0],o=void 0===i?0:i,a=r[1],u=void 0===a?0:a,c=r[2],s=void 0===c?0:c,f=e.data||[],d=f[0],l=void 0===d?o:d,h=f[1],v=void 0===h?u:h,p=f[2],g=void 0===p?s:p;n.data||(n.init=[l,v,g]);n.data=[l,v,g],n.command=l>>4,n._value=g,n.note=v,n.prev=[o,u,s],n.channel=15&l,n._delta=g-n.value,n._movement=n.movement+n._delta}(this,t));var c=a.shared.transform(i._movement);if(~i.step||(i.step=x(c)>i.threshold?0:i.threshold),~i.step&&i._active&&!i.blocked||i.active){if(i.last=i.active&&!i._active,i.first=!i.active&&i._active,i.active=o[u]=i._active,i.abs=x(i._delta),i.sign=D(c),i.direction=D(i._delta),o.movement=i.movement=i._movement=c-i.sign*i.step,o.distance=i.distance=i._distance=i.distance+i.abs,o.offset=i.offset=i._offset+i._movement,o.value=i.value=i._value,o.delta=i.delta=i._delta,i.last)return null==(e=this.__end__)?void 0:e.call(this);i.first?null==(n=this.__start__)||n.call(this):(i.velocity=i._delta/i.deltaTime,null==(r=this.__change__)||r.call(this))}},e.emit=function(){var t,e=this.state,n=this.shared;if(!e.blocked||e.force){var r=this.prop(Object.assign({},n,e,((t={})[this._key]=e._value,t)));void 0!==r&&(e.memo=r)}},Z(t,[{key:"state",get:function(){return this._ctrl.state[this._key]},set:function(t){this._ctrl.state[this._key]=t}},{key:"shared",get:function(){return this._ctrl.state.shared}},{key:"config",get:function(){return this._ctrl.config}},{key:"prop",get:function(){return this._ctrl.props[this._key]}}]),t}();function R(t,e,n,r){void 0===t&&(t={}),void 0===e&&(e="_"),Object.defineProperty(t,e,{get:n,set:r})}var K=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this)._ingKey="turning",e}(0,r.Z)(e,t);var n=e.prototype;return n.bind=function(t){t(this.midimessage.bind(this),"midimessage")},n.midimessage=function(t){this.state._active||this.start(t),this.compute(t)},e}(I),z=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this)._ingKey="noting",e}(0,r.Z)(e,t);var n=e.prototype;return n.bind=function(t){var e=this.config.shared.device;t(this.midimessage.bind(this),"midimessage"),t(this.devicestart.bind(this),e,"start"),t(this.deviceend.bind(this),e,"out"),t(this.deviceend.bind(this),e,"end")},n.midimessage=function(t){this.state.active||this.start(t),this.compute(t)},n.devicestart=function(t){var e=this.state;this.start(t),e._value=255,e._movement=e._delta=e.value-e._value,this.compute(t),this.emit()},n.deviceend=function(t){var e=this.state;e._active&&(e._value=0,e._movement=e._delta=e.value-e._value,e._active=!1,this.compute(t),this.emit())},e}(I),L=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this)._ingKey="fading",e}(0,r.Z)(e,t);var n=e.prototype;return n.bind=function(t){var e=this.config.shared.device;t(this.compute.bind(this),"midimessage"),t(this.devicestart.bind(this),e,"start"),t(this.devicechange.bind(this),e,"change"),t(this.deviceend.bind(this),e,"cancel"),t(this.deviceend.bind(this),e,"end")},n.reset=function(){t.prototype.reset.call(this)},n.devicestart=function(t){var e=this.state;this.start(t),e._value=t.clientX+t.clientY,this.compute(t)},n.devicechange=function(t){var e=this.state,n=t.clientX,r=t.clientY;e._value=n+r,e._delta=e.value-e.value,e._movement=e.movement+e._delta,this.compute(t)},n.deviceend=function(t){this.compute(t)},n.midimessage=function(t){this.state._active||this.start(t),this.compute(t)},e}(I),X=new Map,N=new Map,q={fade:{engine:L,config:{}},turn:{engine:K,config:{}},note:{engine:z,config:{}}},F=function(){function t(t){void 0===t&&(t={}),this.keys=new Set,this.eventStore=new A,this.accessStore=new P,this.native={},this.props={},this.state={shared:{}},this.config={shared:{}},this.props=t,t.fade&&this.keys.add("fade"),t.note&&this.keys.add("note"),t.turn&&this.keys.add("turn")}var e=t.prototype;return e.effect=function(){var t=this.config.shared,e=t.target,n=t.device;(e||n)&&this.bind()},e.clean=function(){this.accessStore.clean(),this.eventStore.clean()},e.apply=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(1===r.length)this.props=t;else{var o=W(t);this.props=o[0],this.native=o[1]}this.config=G.apply(void 0,[e].concat(r)),u(r,(function(t){X.set(t,q[t].engine),N.set(t,q[t].config)}))},e.bind=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i={},a=[],f=this.keys,d=this.native,l=this.config,h=this.state.shared,v=function(t,e,n){if(void 0===e&&(e=""),void 0===n&&(n=""),!n)return a.push(t);var r=e?o(e,n):n;i[r]=i[r]||[],i[r].push(t)};if(l.shared.enabled&&u(f,(function(e){return new(X.get(e))(t,n,e).bind(v)})),c(d,(function(t,e){return v((function(e){return t(Object.assign({},h,{event:e,args:n}))}),"",e)})),c(i,(function(t,e){i[e]=s.apply(void 0,t)})),this.accessStore.add((function(){t.eventStore.add(t.input,"midimessage",s.apply(void 0,a))})),!l.shared.target)return i;c(i,(function(e,n){var r=n.substr(2).toLowerCase();t.eventStore.add(l.shared.target,r,e)}))},Z(t,[{key:"input",get:function(){var t=this.config.shared;return Y(t.input||t.port,g.inputs)}},{key:"output",get:function(){var t=this.config.shared;return Y(t.output||t.port,g.outputs)}}]),t}(),H=/^(fade|turn|note|midimessage|statechange)/,U=function(){return arguments.length<=0?void 0:arguments[0]};function Y(t,e){return void 0===t&&(t=U),f.fun(t)&&(t=t.apply(void 0,null==e?void 0:e.keys())),f.str(t)&&(t=null==e?void 0:e.get(t)),t}function W(t){var e={},n={};return c(t,(function(t,r){H.test(r)?e[r]=t:n[r]=t})),[e,n]}var B={enabled:!0,device:"pointer",threshold:0,transform:function(t){return void 0===t&&(t=0),t||0},output:U,input:U,port:U};function G(t){var e={},n={shared:B};c(t,(function(t,r){(r in B?n.shared:e)[r]=t}));for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(1===i.length){var a=N.get(i[0]);n[i[0]]=Object.assign({},a,e)}else c(e,(function(t,e){var r=N.get(e);r&&(n[e]=Object.assign({},r,t))}));return n}var J=["as","children","fade","turn","note","config"],Q=["as","children","fade","config"],V=["as","children","turn","config"],$=["as","children","note","config"];function tt(t,e){for(var n=M.useMemo((function(){return new F(t)}),[]),r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(n.apply.apply(n,[t,e].concat(i)),M.useEffect(n.effect.bind(n)),M.useEffect((function(){return n.clean.bind(n)}),[]),!e.target)return n.bind.bind(n)}function et(t,e){return void 0===e&&(e={}),tt(t,e,"fade","turn","note")}function nt(t,e){return void 0===e&&(e={}),tt({fade:t},e,"fade")}function rt(t,e){return void 0===e&&(e={}),tt({note:t},e,"note")}function it(t,e){return void 0===e&&(e={}),tt({turn:t},e,"turn")}var ot=M.forwardRef(st),at=M.forwardRef(ft),ut=M.forwardRef(dt),ct=M.forwardRef(lt);function st(t,e){var n=t.as,r=t.children,i=t.fade,o=t.turn,a=t.note,u=t.config,c=(0,T.Z)(t,J),s=et({fade:i,turn:o,note:a},u);return n?(0,M.createElement)(n,Object.assign({},s(),{ref:e},c),r):null==r?void 0:r(s,e)}function ft(t,e){var n=t.as,r=t.children,i=t.fade,o=t.config,a=(0,T.Z)(t,Q),u=nt(i,o);return n?(0,M.createElement)(n,Object.assign({},u(),a,{ref:e}),r):null==r?void 0:r(u,e)}function dt(t,e){var n=t.as,r=t.children,i=t.turn,o=t.config,a=(0,T.Z)(t,V),u=it(i,o);return n?(0,M.createElement)(n,Object.assign({},u(),a,{ref:e}),r):null==r?void 0:r(u,e)}function lt(t,e){var n=t.as,r=t.children,i=t.note,o=t.config,a=(0,T.Z)(t,$),u=rt(i,o);return n?(0,M.createElement)(n,Object.assign({},u(),a,{ref:e}),r):null==r?void 0:r(u,e)}var ht=function(){function t(t,e,n){var r;this._ctrl=new F(e);for(var i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];(r=this._ctrl).apply.apply(r,[e,n].concat(o)),f.str(t)||f.fun(t)?this._ctrl.config.shared.device=t:this._ctrl.config.shared.target=t,this._ctrl.effect()}return t.prototype.destroy=function(){this._ctrl.clean()},t}(),vt=function(t){function e(e,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),t.call(this,e,n,r,"fade","turn","note")||this}return(0,r.Z)(e,t),e}(ht)}}]);